{% extends "components/Layout/base_pages.html" %}
{% load static tailwind_filters %}

{% block head_title %}Editar Usuario{% endblock head_title %}

{% block content_pages %}
  <div class="flex justify-between items-center mb-6">
      <h1 class="font-bold text-gray-900 text-2xl">Editar: {{ user_editar.username }}</h1>
      <a href="{% url 'User' %}" class="text-sm text-blue-600 hover:underline">Volver a la lista</a>
  </div>

  <form method="post" enctype="multipart/form-data" class="space-y-4">
      {% csrf_token %}

      <div class="flex justify-center mb-6">
         {% if user_editar.profile.image %}
            <img src="{{ user_editar.profile.image.url }}" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg">
         {% else %}
            <img src="{% static 'img/profile.webp' %}" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg">
         {% endif %}
      </div>
      
      <div>
        <label class="block text-sm font-bold text-gray-700 mb-1">Cambiar Foto</label>
        {{ profile_form.image }}
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-bold text-gray-700 mb-1">Rol de Sistema</label>
            {{ user_form.grupo }}
          </div>
          <div>
            <label class="block text-sm font-bold text-gray-700 mb-1">Cargo Laboral</label>
            {{ profile_form.position_FK }}
          </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
            <label class="block text-sm font-bold text-gray-700 mb-1">Usuario</label>
            {{ user_form.username }}
        </div>
        <div>
            <label class="block text-sm font-bold text-gray-700 mb-1">Email</label>
            {{ user_form.email }}
        </div>
        <div>
            <label class="block text-sm font-bold text-gray-700 mb-1">Nombres</label>
            {{ user_form.first_name }}
        </div>
        <div>
            <label class="block text-sm font-bold text-gray-700 mb-1">Apellidos</label>
            {{ user_form.last_name }}
        </div>
      </div>

      <div class="flex items-center gap-2 mt-2">
         {{ user_form.is_active }}
         <label class="text-sm text-gray-700">Usuario Activo (Desmarcar para bloquear acceso)</label>
      </div>

      <div class="pt-4">
         <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors shadow-md">
            Guardar Cambios
         </button>
      </div>
  </form>
{% endblock content_pages %}